{% extends 'base.html.twig' %}

{% block title %}Favourite Listings{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('account') }}
{% endblock %}

{% block body %}
    {% include 'layouts/common/breadcrumbs.html.twig' with {
        array: [
            {
                crumb: 'My Account',
            }
        ]
    } %}

    {% include 'layouts/common/title-block.html.twig' with {
        text: 'My Account',
        tag: 'h1',
        wrapMod: 'container mb50',
    } only %}


    {% embed 'layouts/containers/account-table.html.twig' with {
        userData: user|default(false),
        listings: favouritesListings,
    } only %}
        {% block account_content %}
            <h3 class="h3 mb40">My Favourite Properties</h3>

            {% if listings|default(false)|length %}
                <div class="favorites-nav mb50">
                    <form class="form-style js-submit-on-change">
                        {% include 'layouts/form/select.html.twig' with {
                            'name': 'favorites-sort',
                            'inputMod': '_fill-white _dark-text',
                            'options': [
                                {
                                    'value': 'newest_listings',
                                    'text': 'Newest listings',
                                },
                                {
                                    'value': 'prop2',
                                    'text': 'prop2',
                                },
                            ]
                        } only %}
                    </form>

                    {% include 'layouts/modules/controls-bar.html.twig' with {
                        wrapMod: '_white hide-on-700',
                        controlsArray: [
                            {
                                label: 'Print Summary Report',
                                mod: 'icon-print-frame js-print-favorites',
                            }
                        ],
                    } only %}
                </div>

                <div class="listings-tile js-listings-tile">
                    {% for item in listings %}
                        {% include 'layouts/modules/estate-card.html.twig' with item|merge({sliderMod: '_g3-bg js-default-slider'}) only %}
                    {% endfor %}
                </div>
            {% else %}
                <span class="subtitle mb40">
                    You haven't added any homes yet. Start searching for properties to add now.
                </span>

                {% include 'layouts/controls/button.html.twig' with {
                    href: path('listings_map', {location: 'Vancouver,BC'}),
                    text: 'Search Homes',
                    mod: '_turquoise _big-m-small',
                    textMod: 'button0',
                } only %}
            {% endif %}
        {% endblock %}
    {% endembed %}

    {% include 'layouts/sections/note.html.twig' with {
        text: 'The data relating to real estate on this website comes in part from the MLS® Reciprocity program of either the Real Estate Board of Greater Vancouver (REBGV), the Fraser Valley Real Estate Board (FVREB) or the Chilliwack and District Real Estate Board (CADREB). Real estate listings held by participating real estate firms are marked with the MLS® logo and detailed information about the listing includes the name of the listing agent. This representation is based in whole or part on data generated by either the REBGV, the FVREB or the CADREB which assumes no responsibility for its accuracy. The materials contained on this page may not be reproduced without the express written consent of either the REBGV, the FVREB or the CADREB.',
        mod: '_mls mt50',
    } only %}

    {% include 'layouts/sections/note.html.twig' with {
        mod: '_details mt20',
        label: 'More details:',
        text: 'Information regarding school boundaries and other statistics changes frequently and is for general information purposes only. You should not use such information in determining the legal eligibility to attend any particular school or school system',
    } only %}

    {% include 'layouts/popups/favorites-print-popup.html.twig' %}


{#    <div>#}
{#        {{ dump(user) }}#}
{#    </div>#}

{#    <div>#}
{#        {{ dump(favouritesListings) }}#}
{#    </div>#}
{% endblock %}
