{% set chartInfo = [
    {
        label: 'This house',
        price: '$1,400,000',
        labelMod: '_color-a',
    },
    {
        label: 'Surrey',
        link: '#',
        labelMod: '_color-b',
    },
    {
        label: 'Fleetwood Tynehead',
        price: '$1,399,000',
        priceChange: '-6.38%',
        labelMod: '_color-c',
    },
] %}

<section class="price-comparison js-chart-wrap {{ wrapMod ?? 'mb70' }}">
    <div class="price-comparison__container {{ containerMod ?? 'container' }}">
        {% include 'layouts/common/title-block.html.twig' with {
            tag: 'h3',
            text: title|default('Listing Price Comparision'),
        } only %}

        <form class="price-comparison-form js-chart-form mb20">
            <div class="price-comparison-form__row mtr20">
                <div class="price-comparison-form__col mt20">
                    {% include 'layouts/controls/radio-labels-row.html.twig' with {
                        wrapMod: '',
                        name: 'type',
                        items: [
                            {
                                value: 'type1',
                                text: 'Median List Price',
                            },
                            {
                                value: 'type2',
                                text: 'Median Price per Sq.ft ',
                            },
                            {
                                value: 'type3',
                                text: 'No.of Active Listings',
                            },
                        ]
                    } only %}
                </div>
                <div class="price-comparison-form__col mt20">
                    {% include 'layouts/controls/radio-labels-row.html.twig' with {
                        wrapMod: '',
                        name: 'period',
                        selectedVal: 1,
                        items: [
                            {
                                value: 12,
                                text: '1 Year',
                            },
                            {
                                value: 6,
                                text: '6 Months',
                            },
                            {
                                value: 1,
                                text: '1 Month',
                            },
                        ]
                    } only %}
                </div>
            </div>
        </form>

        <div class="price-comparison__chart-wrap js-preloader-wrap">
            {% include 'layouts/common/spinner.html.twig' %}

            <div class="chart-info mb20">
                {% for item in chartInfo %}
                    <div class="chart-info__item">
                        <div class="chart-info__content mtr5">
                            <span class="chart-info__label tiny-text mt5 {{ item.labelMod|default('') }}">{{ item.label }}</span>

                            {% if item.price|default(false) %}
                                <span class="chart-info__price body-text_bold mt5">
                                    {{ item.price }}
                                    {% if item.priceChange|default(false) %}
                                        <span class="chart-info__price-diff inline small-text_bold">{{ ' ' ~ item.priceChange }}</span>
                                    {% endif %}
                                </span>

                                {% if item.link|default(false) %}
                                    <a class="chart-info__link button1 link-purple mt5" href="{{ item.link }}">Show Comparable</a>
                                {% endif %}
                            {% else %}
                                <a class="chart-info__warning button1 mt5">No comparables</a>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>

            <div class="price-comparison__chart-scroll-container js-chart-scroll-container pt30 mb30">
                <div id="line-chart" class="chart js-chart" data-params="{{ {
                    path: path('price_log_data', {listingId: listingId, range: '@'}),
                    fitLabelsFromCount: 12,
                }|json_encode }}"></div>
            </div>
        </div>

        <div class="price-comparison__bottom mt30">
            <span class="tiny-text">Data is based on list prices of similar active listings. This representation is based in whole or in part on data generated by the Chilliwack & District Real Estate Board, Fraser Valley Real Estate Board or Real Estate Board of Greater Vancouver which assumes no responsibility for its accuracy</span>
        </div>
    </div>
</section>
