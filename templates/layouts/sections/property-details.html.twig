{% set detailsOutputParams = {
    location: {
        title: 'Location Details',

        colLabels: {
            country: 'Area',
            state: 'State',
            city: 'City',
            postalCode: 'Postal Code',
            subdivision: 'Sub-Area/Community',
        },

        outputProps: ['country','state','city','postalCode','subdivision']
    },
    metrics: {
        title: 'Property Metrics',

        colLabels: {
            bedRooms: 'Total Bedrooms',
            bathRooms: 'Full Baths',
            stories: 'Stories',
            sqrtFootage: 'Floor Area Total (' ~ metrics.sqrtFootageUnits|default('Sq.ft') ~ ')',
        },

        outputProps: ['bedRooms', 'bathRooms', 'stories', 'sqrtFootage']
    },
    financials: {
        title: 'Financial Details',

        colLabels: {
            listingPrice: 'List Price',
            strataMaintenanceFee: 'Strata Maint. Fee',
            grossTaxes: 'Gross taxes',
            grossTaxYear: 'Gross Taxes Year',
        },

        outputProps: ['listingPrice','strataMaintenanceFee','grossTaxes','grossTaxYear',],

        formatValAsCurrency: true
    },
} %}

{% set propertyDetailsSliderParameters = {
    slidesToShow: 3,
    slidesToScroll: 3,
    lazyLoadSrcAttr: 'none',
    arrows: false,
    dots: false,
    responsive: [
        {
            breakpoint: 700,
            settings: {
                slidesToShow: 2,
                slidesToScroll: 2,
                dots: true,
            }
        },
        {
            breakpoint: 500,
            settings: {
                slidesToShow: 1,
                slidesToScroll: 1,
                dots: true,
            }
        },
    ]
} %}

<section class="property-details {{ wrapMod ?? 'mb70' }}">
    <div class="property-details__container {{ containerMod ?? 'container' }}">
        {% include 'layouts/common/title-block.html.twig' with {
            tag: 'h3',
            text: title|default('Property details'),
        } only %}

        {% if description|default(false) %}
            <p class="property-details__description table-text mb50">
                {{ description }}
            </p>
        {% endif %}

        <div class="property-table pt50 pb50">
            {% if list|default(false) %}
                <div class="property-table__top pb50 mb50">
                    <div
                            class="property-table__list js-default-slider _gray-dots-nav"
                            data-slider-parameters="{{ propertyDetailsSliderParameters|json_encode() }}"
                    >
                        {% for key, val in list|cast_to_array %}
                            <div class="property-table__col">
                                <h5 class="property-table__title h5 mb20">{{ attribute(detailsOutputParams, key).title }}</h5>

                                {% for prop in attribute(detailsOutputParams, key).outputProps %}
                                    {% if attribute(val, prop)|default('')|length %}
                                        <div class="property-table__row table-text mb20">
                                        <span class="property-table__label">
                                            {{ attribute(detailsOutputParams, key).colLabels[prop] }}
                                        </span>
                                            <span class="property-table__val">{{
                                                attribute(detailsOutputParams, key).formatValAsCurrency|default(false)
                                                ? attribute(val, prop)|number_format(0, '.', ',')
                                                : attribute(val, prop)
                                            }}</span>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}

            <div class="property-table__bottom {% if feedId == 'ddf' %}icon-mls{% endif %}">
                <h5 class="property-table__title h5 mb20">
                    Listed by {{ listingAgent.agentFullName }}
                    <br>
                    {{ listingAgent.agencyName }}
                </h5>

                <div class="text-block">
                    <p>{{ bottomText ?? 'This representation is based in whole or in part on data generated by the Chilliwack & District Real Estate Board, Fraser Valley Real Estate Board or Real Estate Board of Greater Vancouver which assumes no responsibility for its accuracy.' }}</p>
                </div>
            </div>
        </div>
    </div>
</section>
